
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ION Game Vault</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@900&display=swap" rel="stylesheet">
  <style>
    :root {
      --theme-hue: 210;
      --theme-accent: hsl(var(--theme-hue), 100%, 56%);
      --theme-accent-light: hsl(var(--theme-hue), 100%, 72%);
      --theme-accent-dark: hsl(var(--theme-hue), 72%, 36%);
      --theme-bg: #0a0f2c;
    }
    html, body {
      margin: 0; padding: 0; height: 100%;
      background: var(--theme-bg);
      color: #e0e6f0;
      font-family: 'Montserrat', Arial, sans-serif;
      min-height: 100vh;
      width: 100vw;
      overflow-x: hidden;
    }
    #vanta-bg {
      position: fixed;
      left: 0; top: 0;
      width: 100vw; height: 100vh;
      z-index: 0;
      pointer-events: none;
    }
    body {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding-top: 100px;
      min-height: 100vh;
      position: relative;
      z-index: 1;
      transition: padding-top 0.2s;
    }
    .container {
      max-width: 960px;
      width: 90%;
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      z-index: 2;
    }
    h1 {
      font-family: 'Montserrat', Arial, sans-serif;
      font-weight: 900;
      font-size: clamp(1.3rem, 7vw, 4.2rem);
      max-width: 100vw;
      letter-spacing: clamp(0.03em, 3vw, 0.18em);
      background: linear-gradient(90deg, var(--theme-accent), var(--theme-accent-light));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-fill-color: transparent;
      margin: 60px 0 32px 0;
      text-align: center;
      user-select: none;
      white-space: nowrap;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      text-rendering: optimizeLegibility;
      border: none;
      box-shadow: none;
      padding: 0;
      text-shadow: none;
      overflow-x: auto;
    }
    @media (max-width: 600px) {
      h1 {
        font-size: clamp(1rem, 6vw, 2.3rem);
        margin-bottom: 28px;
        white-space: normal;
        word-break: break-word;
        margin-top: 30px;
      }
    }
    .navbar {
      position: fixed;
      top: 18px;
      right: 32px;
      z-index: 1002;
      background: rgba(10, 15, 44, 0.95);
      border-radius: 14px;
      box-shadow: 0 2px 16px var(--theme-accent-dark, #1e90ff33);
      border: 1.5px solid var(--theme-accent-dark, #1e90ff44);
      padding: 8px 20px 8px 16px;
      display: flex;
      align-items: center;
      gap: 18px;
      font-family: 'Montserrat', Arial, sans-serif;
    }
    .navbar a {
      text-decoration: none;
      color: var(--theme-accent-light);
      font-weight: 600;
      font-size: 1.09rem;
      letter-spacing: 0.04em;
      transition: color 0.16s, text-shadow 0.16s;
      padding: 3px 10px;
      border-radius: 10px;
      position: relative;
    }
    .navbar a:hover, .navbar a:focus-visible {
      color: #fff;
      background: var(--theme-accent);
      text-shadow: 0 0 8px var(--theme-accent-light), 0 0 2px #fff;
      outline: none;
    }
    .navbar .nav-logo {
      font-size: 1.2em;
      font-weight: 700;
      color: var(--theme-accent);
      background: none;
      cursor: pointer;
      padding: 0 10px 0 0;
      letter-spacing: 0.08em;
      text-shadow: 0 0 8px var(--theme-accent-light);
      border: none;
    }
    .status-widget {
      position: fixed;
      top: 18px;
      left: 32px;
      transform: none;
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 8px 14px;
      background: rgba(10, 15, 44, 0.92);
      border-radius: 14px;
      box-shadow: 0 2px 16px var(--theme-accent-dark, #1e90ff33);
      font-size: 1.1rem;
      color: var(--theme-accent-light);
      z-index: 1000;
      border: 1.5px solid var(--theme-accent-dark, #1e90ff44);
      font-family: 'Montserrat', Arial, sans-serif;
      user-select: none;
      min-width: 220px;
      justify-content: center;
    }
    .status-widget span {
      display: flex;
      align-items: center;
      gap: 6px;
    }
    #battery-icon svg, #wifi-icon svg {
      display: inline-block;
      vertical-align: middle;
      height: 1.2em;
      width: 1.2em;
    }
    .color-btns {
      display: flex;
      align-items: center;
      gap: 4px;
      margin-left: 6px;
    }
    .color-btn {
      width: 18px;
      height: 18px;
      border-radius: 6px;
      border: 2px solid #fff;
      box-shadow: 0 0 2px #0003;
      cursor: pointer;
      outline: none;
      transition: border 0.16s, box-shadow 0.16s;
      position: relative;
      background: #fff;
      display: inline-block;
      padding: 0;
    }
    .color-btn.selected, .color-btn:focus-visible {
      border: 2.5px solid var(--theme-accent);
      box-shadow: 0 0 0 2px var(--theme-accent-light);
      z-index: 2;
    }
    .color-btn[data-hue="210"] { background: hsl(210,100%,56%); }
    .color-btn[data-hue="0"]   { background: hsl(0,100%,56%); }
    .color-btn[data-hue="30"]  { background: hsl(30,100%,56%); }
    .color-btn[data-hue="50"]  { background: hsl(50,100%,56%); }
    .color-btn[data-hue="120"] { background: hsl(120,100%,40%); }
    .color-btn[data-hue="180"] { background: hsl(180,100%,40%); }
    .color-btn[data-hue="270"] { background: hsl(270,100%,60%); }
    .color-btn[data-hue="320"] { background: hsl(320,100%,60%); }
    .color-btn[data-hue="220"] { background: hsl(220,10%,52%); }
    .color-btn::after {
      content: '';
      display: block;
      width: 100%;
      height: 100%;
      border-radius: 6px;
      border: 2px solid #fff0;
      position: absolute;
      left: 0; top: 0;
      pointer-events: none;
    }
    /* Quick Settings Gear Button */
    #quick-settings-gear-btn {
      position: fixed;
      bottom: 32px;
      right: 32px;
      width: 62px;
      height: 62px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--theme-accent), var(--theme-accent-light));
      box-shadow: 0 4px 22px var(--theme-accent-dark, #1e90ff66);
      border: none;
      z-index: 2000;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: background 0.18s, box-shadow 0.18s, transform 0.18s;
      outline: none;
    }
    #quick-settings-gear-btn:active,
    #quick-settings-gear-btn:focus-visible {
      background: var(--theme-accent-dark);
      transform: scale(0.97);
    }
    #quick-settings-gear-btn svg {
      width: 32px;
      height: 32px;
      fill: #fff;
      pointer-events: none;
    }
    @media (max-width: 600px) {
      #quick-settings-gear-btn {
        width: 44px;
        height: 44px;
        bottom: 14px;
        right: 10px;
      }
      #quick-settings-gear-btn svg {
        width: 22px;
        height: 22px;
      }
    }
    /* Quick Settings Modal */
    #quick-settings-modal {
      display: none;
      position: fixed;
      z-index: 2500;
      left: 0; top: 0; width: 100vw; height: 100vh;
      background: rgba(18,22,44,0.32);
      justify-content: center;
      align-items: center;
    }
    #quick-settings-modal.active {
      display: flex;
    }
    #quick-settings-sheet {
      background: rgba(18, 22, 44, 0.98);
      border-radius: 18px;
      box-shadow: 0 2px 28px var(--theme-accent-dark, #1e90ff44);
      border: 1.5px solid var(--theme-accent-dark, #1e90ff44);
      padding: 32px 32px 24px 32px;
      min-width: 270px;
      min-height: 90px;
      font-family: 'Montserrat', Arial, sans-serif;
      color: #e0e6f0;
      transition: top 0.2s;
      display: flex;
      flex-direction: column;
      gap: 22px;
      max-width: 96vw;
      position: relative;
      animation: quickSettingsIn 0.19s cubic-bezier(.7,1.8,.2,1) 1;
    }
    @keyframes quickSettingsIn {
      0% { opacity: 0; transform: translateY(22px) scale(0.97);}
      100% { opacity: 1; transform: none;}
    }
    #quick-settings-modal-close {
      position: absolute;
      top: 12px;
      right: 16px;
      background: none;
      border: none;
      color: var(--theme-accent-light);
      font-size: 1.7rem;
      font-weight: 700;
      cursor: pointer;
      opacity: 0.8;
      transition: opacity 0.15s;
      z-index: 2;
    }
    #quick-settings-modal-close:hover {
      opacity: 1;
      color: var(--theme-accent);
    }
    #quick-settings-sheet h2 {
      margin: 0 0 16px 0;
      font-size: 1.28rem;
      color: var(--theme-accent-light);
      font-weight: 700;
      letter-spacing: 0.05em;
      text-align: left;
    }
    .setting-row {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 10px;
      font-size: 1.08rem;
    }
    .setting-label {
      flex: 1;
      color: var(--theme-accent-light);
    }
    /* Dropdown styles */
    .dropdown {
      position: relative;
      min-width: 130px;
    }
    .dropdown select {
      background: #232b40;
      color: #fff;
      border-radius: 8px;
      border: 1.5px solid var(--theme-accent-dark);
      font-size: 1.07rem;
      padding: 5px 20px 5px 9px;
      font-family: 'Montserrat', Arial, sans-serif;
      appearance: none;
      outline: none;
      transition: border 0.16s;
      box-shadow: 0 1px 4px #0002;
    }
    .dropdown:after {
      content: "▼";
      position: absolute;
      right: 12px; top: 8px;
      color: var(--theme-accent-light);
      font-size: 0.75em;
      pointer-events: none;
    }
    /* End Quick Settings */
    .scroll-area {
      width: 100%;
      max-width: 900px;
      height: 700px;
      overflow-y: auto;
      position: relative;
      margin-bottom: 32px;
      scrollbar-width: thin;
      scrollbar-color: var(--theme-accent) var(--theme-bg);
      padding-bottom: 40px;
    }
    .scroll-area::-webkit-scrollbar {
      width: 14px;
      background: var(--theme-bg);
      border-radius: 8px;
    }
    .scroll-area::-webkit-scrollbar-thumb {
      background: linear-gradient(var(--theme-accent), var(--theme-accent-light) 70%);
      border-radius: 8px;
      border: 3px solid var(--theme-bg);
      box-shadow: 0 0 8px var(--theme-accent-dark);
    }
    .scroll-area::-webkit-scrollbar-thumb:hover {
      background: var(--theme-accent-light);
    }
    .scroll-area::-webkit-scrollbar-corner {
      background: var(--theme-bg);
    }
    .scroll-percent {
      position: absolute;
      top: 12px;
      right: -44px;
      width: 40px;
      background: rgba(10, 15, 44, 0.85);
      color: var(--theme-accent-light);
      font-weight: 700;
      font-size: 1.2rem;
      border-radius: 12px;
      box-shadow: 0 0 8px var(--theme-accent-dark);
      text-align: center;
      padding: 6px 0;
      pointer-events: none;
      user-select: none;
      z-index: 10;
      transition: top 0.15s cubic-bezier(.4,2,.6,1);
    }
    .game-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 28px;
      width: 100%;
      padding-right: 18px;
      box-sizing: border-box;
    }
    .game-button {
      background: rgba(20, 30, 60, 0.93);
      border: 2.5px solid var(--theme-accent);
      border-radius: 16px;
      height: 140px;
      cursor: pointer;
      transition: 
        background 0.25s cubic-bezier(.4,2,.6,1),
        box-shadow 0.25s cubic-bezier(.4,2,.6,1),
        border-color 0.18s,
        color 0.18s,
        transform 0.18s;
      display: flex;
      justify-content: center;
      align-items: center;
      color: var(--theme-accent-light);
      font-weight: 700;
      font-size: 1.3rem;
      letter-spacing: 0.08em;
      user-select: none;
      text-decoration: none;
      box-shadow: 0 0 12px var(--theme-accent-dark);
      outline: none;
      position: relative;
      overflow: hidden;
    }
    .game-button-canvas {
      position: absolute;
      left: 0; top: 0;
      width: 100%; height: 100%;
      pointer-events: none;
      z-index: 0;
      display: block;
    }
    .game-button-content {
      position: relative;
      z-index: 1;
      width: 100%;
      text-align: center;
    }
    .game-button::before {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: 14px;
      border: 2.5px solid transparent;
      transition: border-color 0.2s;
      pointer-events: none;
    }
    .game-button:hover,
    .game-button:focus {
      background: #111a2e;
      color: #fff;
      border-color: var(--theme-accent-light);
      box-shadow: 0 0 24px var(--theme-accent), 0 0 0 4px var(--theme-accent-dark);
      transform: translateY(-5px) scale(1.04);
      z-index: 1;
    }
    .game-button:hover::before,
    .game-button:focus::before {
      border-color: var(--theme-accent-light);
      box-shadow: 0 0 20px var(--theme-accent-light);
    }
    @media (max-width: 600px) {
      .scroll-area {
        height: 400px;
        padding-bottom: 30px;
      }
      body {
        padding-top: 60px;
      }
      h1 {
        font-size: clamp(1.1rem, 7vw, 2.3rem);
        margin-bottom: 28px;
        white-space: normal;
        word-break: break-word;
        margin-top: 30px;
      }
      .game-button {
        height: 90px;
        font-size: 1rem;
      }
      .game-grid {
        gap: 16px;
      }
      .scroll-percent {
        font-size: 1rem;
        width: 32px;
        right: -36px;
      }
      .status-widget {
        font-size: 0.98rem;
        padding: 6px 10px;
        gap: 8px;
        min-width: 140px;
        left: 8px;
        top: 8px;
      }
      .color-btn {
        width: 15px;
        height: 15px;
        border-radius: 4px;
      }
      .navbar {
        top: 8px;
        right: 8px;
        padding: 5px 7px 5px 8px;
        border-radius: 10px;
        font-size: 0.98rem;
        gap: 10px;
      }
      .navbar a {
        padding: 3px 6px;
        font-size: 0.95rem;
      }
    }
    /* Iframe full-window view for ?src=... mode */
    #full-iframe-container {
      display: none;
      position: fixed;
      left: 0; top: 0;
      width: 100vw; height: 100vh;
      background: #181b24;
      z-index: 10000;
    }
    #full-iframe {
      width: 100vw;
      height: 100vh;
      border: none;
      background: #181b24;
      display: block;
    }
    #iframe-download-btn {
      position: fixed;
      left: 24px;
      top: 18px;
      z-index: 99;
      background: linear-gradient(90deg,var(--theme-accent),var(--theme-accent-light));
      color: #fff;
      padding: 10px 22px;
      border-radius: 9px;
      border: none;
      font-family: 'Montserrat', Arial, sans-serif;
      font-weight: 700;
      font-size: 1.09rem;
      text-decoration: none;
      box-shadow: 0 2px 16px var(--theme-accent-dark, #1e90ff33);
      cursor: pointer;
      transition: background 0.15s;
      outline: none;
      display: none;
    }
    #iframe-download-btn:active,
    #iframe-download-btn:focus-visible {
      background: var(--theme-accent-dark);
    }
    #full-iframe-fallback {
      color: #fff;
      background: #181b24;
      font-family: 'Montserrat', Arial, sans-serif;
      font-size: 1.3rem;
      text-align: center;
      padding: 60px 18px 40px 18px;
      display: none;
    }
    #full-iframe-fallback a {
      display: inline-block;
      color: #5cf;
      font-size: 1.1em;
      text-decoration: underline;
      margin-top: 18px;
      word-break: break-all;
    }
    /* Modal styles for in-site iframe window */
    #game-modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      z-index: 5000;
      width: 100vw; height: 100vh;
      background: rgba(14,15,34,0.93);
      backdrop-filter: blur(1.5px);
      justify-content: center;
      align-items: center;
    }
    #game-modal .modal-inner {
      position: relative;
      width: 90vw;
      max-width: 1000px;
      height: 88vh;
      box-shadow: 0 0 30px #000c;
      border-radius: 16px;
      overflow: hidden;
      background: #141c36;
      display: flex;
      flex-direction: column;
    }
    #game-modal-close {
      position: absolute;
      top: 10px;
      right: 10px;
      z-index: 10;
      padding: 7px 20px;
      border-radius: 7px;
      background: #232d48;
      color: #fff;
      font-weight: 700;
      font-size: 1.15rem;
      border: none;
      cursor: pointer;
    }
    #game-modal iframe {
      border: none;
      border-radius: 0 0 16px 16px;
      background: #141c36;
      width: 100%;
      height: 100%;
      display: block;
      flex: 1;
    }
    #iframe-fallback {
      display: none;
      padding: 40px 18px;
      text-align: center;
      color: white;
      font-size: 1.3rem;
      background: rgba(24,27,36,0.97);
      font-family: 'Montserrat', Arial, sans-serif;
    }
    #iframe-fallback a {
      color: #5cf;
      word-break: break-all;
      font-size: 1.1em;
      text-decoration: underline;
      display: inline-block;
      margin-top: 18px;
    }
  </style>
</head>
<body>
  <!-- Full-window iframe for ?src=... mode -->
 
      <span id="full-iframe-fallback-msg"></span><br>
      <a id="full-iframe-fallback-link" href="#" target="_blank"></a>
    </div>
  </div>
  <div id="vanta-bg"></div>
  <nav class="navbar" id="navbar">
    <span class="nav-logo" tabindex="0" title="ION Game Vault Home">ION</span>
    <a href="index.html" tabindex="0">Home</a>
    <a href="G@MES.html" tabindex="0">Games</a>
     <a href="Apps.html" tabindex="0">Apps</a>
      <a href="AI.html" tabindex="0">AI/Chat</a>
    <a href="About.html" tabindex="0">About</a>
     <a href="Contact.html" tabindex="0">Contact</a>
     <a href="AltLink.html" tabindex="0">Alt Links</a>
   
  </nav>

  <!-- Quick Settings Gear Button -->
  <button id="quick-settings-gear-btn" title="Quick Settings" aria-label="Quick Settings">
    <svg viewBox="0 0 24 24">
      <path d="M12 15.5A3.5 3.5 0 1 0 12 8.5a3.5 3.5 0 0 0 0 7zm7.43-4.06l1.77-1.37a.5.5 0 0 0 .11-.66l-1.7-2.94a.5.5 0 0 0-.61-.23l-2.1.84a6.82 6.82 0 0 0-1.48-.86l-.32-2.24A.5.5 0 0 0 14 2h-4a.5.5 0 0 0-.5.43l-.32 2.24c-.52.2-1.01.47-1.48.86l-2.1-.84a.5.5 0 0 0-.61.23L2.7 7.41a.5.5 0 0 0 .11.66l1.77 1.37c-.05.32-.08.65-.08.99 0 .34.03.67.08.99l-1.77 1.37a.5.5 0 0 0-.11.66l1.7 2.94c.13.22.39.3.61.23l2.1-.84c.47.39.96.72 1.48.86l.32 2.24A.5.5 0 0 0 10 22h4c.26 0 .46-.18.5-.43l.32-2.24c.52-.2 1.01-.47 1.48-.86l2.1.84c.22.09.48-.01.61-.23l1.7-2.94a.5.5 0 0 0-.11-.66l-1.77-1.37c.05-.32.08-.65.08-.99 0-.34-.03-.67-.08-.99zM12 17a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"/>
    </svg>
  </button>
  <!-- Quick Settings Modal (dropdown for premade cloaking) -->
  <div id="quick-settings-modal">
    <div id="quick-settings-sheet">
      <button id="quick-settings-modal-close" title="Close" aria-label="Close">&times;</button>
      <h2>Quick Settings</h2>
     <div class="setting-row">
  <span class="setting-label">Premade Cloaking</span>
  <span class="dropdown" style="display:flex;align-items:center;gap:8px;">
    <select id="premade-cloak-dropdown">
      <option value="off">Off</option>
      <option value="classroom">Google Classroom</option>
      <option value="sheets">Google Sheets</option>
      <option value="slides">Google Slides</option>
      <option value="docs">Google Docs</option>
      <option value="gmail">Gmail</option>
      <option value="powerschool">PowerSchool</option>
      <option value="studysync">StudySync</option>
      <option value="khan">Khan Academy</option>
      <option value="adobe">Adobe</option>
      <option value="powerpoint">PowerPoint</option>
      <option value="word">Microsoft Word</option>
      <option value="youtube">YouTube</option>
    </select>
    <button id="cloak-now-btn" type="button" style="padding:4px 15px;border-radius:6px;border:none;background:var(--theme-accent);color:#fff;font-weight:700;cursor:pointer;">Cloak Now</button>
  </span>
</div>
    </div>
  </div>
  <div class="container" id="main-container">
    <h1>ION GAME VAULT</h1>
    <div class="scroll-area" id="scroll-area">
      <div class="scroll-percent" id="scroll-percent">0%</div>
      <div class="game-grid">
        <!-- Game Buttons Autogenerated -->
        <a href="games.html/BobTheRobber4.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Bob The Robber 4</span></a>
          <a href="games.html/2048Fusion.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">2048 Fusion</span></a>
          <a href="games.html/RocketLeague.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Rocket League</span></a>
          <a href="games.html/DriftHunters.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Drift Hunters</span></a>
          <a href="games.html/Uno.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Uno</span></a>
          <a href="games.html/IdleRestraunt.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Idle Restraunt</span></a>
        <a href="games.html/MergeCakes.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Merge Cakes</span></a>
          <a href="games.html/CrazyCars.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Crazy Cars</span></a>
          <a href="games.html/HeadSoccer.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Head Soccer</span></a>
          <a href="games.html/Wordle.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Wordle</span></a>
          <a href="games.html/ArcheryWorldTour.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Archery World Tour</span></a>
          <a href="games.html/AwesomeTanks1.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Awesome Tanks 1</span></a>
        <a href="games.html/IdleMiningEmpire.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Idle Mining Empire</span></a>
        <a href="games.html/BubbleTanks2.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Bubble Tanks 2</span></a>
        <a href="games.html/ChromeDino.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Chrome Dino</span></a>
        <a href="games.html/ClusterRush.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Cluster Rush</span></a>
        <a href="games.html/CookieClicker.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Cookie Clicker</span></a>
        <a href="games.html/Drift boss.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Drift Boss</span></a>
        <a href="games.html/DriveMad.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Drive Mad</span></a>
        <a href="games.html/GeometryDash.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Geometry Dash</span></a>
        <a href="games.html/HelixJump.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Helix Jump</span></a>
        <a href="games.html/LearnToFly.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Learn To Fly</span></a>
        <a href="games.html/LearnToFly2.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Learn To Fly 2</span></a>
        <a href="games.html/Minecraft1.5.2.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Minecraft 1.5.2</span></a>
        <a href="games.html/Minecraft1.8.8.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Minecraft 1.8.8</span></a>
        <a href="games.html/MonkeyMart.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Monkey Mart</span></a>
        <a href="games.html/MotoX3M-Pool.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Moto X3M Pool</span></a>
        <a href="games.html/MotoX3M-Spooky.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Moto X3M Spooky</span></a>
        <a href="games.html/MotoX3M-Winter.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Moto X3M Winter</span></a>
        <a href="games.html/MotoX3M.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Moto X3M</span></a>
        <a href="games.html/Run3.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Run 3</span></a>
        <a href="games.html/Slope.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Slope</span></a>
        <a href="games.html/Slope2.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Slope 2</span></a>
        <a href="games.html/TunnelRush.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Tunnel Rush</span></a>
        <a href="games.html/bobtherobber2.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Bob The Robber 2</span></a>
       <a href="games.html/1(2048).html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">1</span></a>
        <a href="games.html/BigTowerTinySquare.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Big Tower Tiny Square</span></a>
        <a href="games.html/Bloxors.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Bloxors</span></a>
        <a href="games.html/CircloO.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">CircloO</span></a>
        <a href="games.html/CrazyCattle3d.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Crazy Cattle</span></a>
        <a href="games.html/CrossyRoad.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Crossy Road</span></a>
        <a href="games.html/CutTheRope.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Cut The Rope</span></a>
        <a href="games.html/DuckLife.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Duck Life</span></a>
        <a href="games.html/DuckLife2.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Duck Life 2</span></a>
        <a href="games.html/FruitNinja.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Fruit Ninja</span></a>
        <a href="games.html/GetAwayShootout.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Getaway Shootout</span></a>
        <a href="games.html/GoogleSnake.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Google Snake</span></a>
        <a href="games.html/Hextris.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Hextris</span></a>
        <a href="games.html/JetpackJoyride.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Jetpack Joyride</span></a>
        <a href="games.html/LevilDevil.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Level Devel</span></a>
        <a href="games.html/MiniPutt.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Mini Putt</span></a>
        <a href="games.html/PaperIo2.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Paper io 2</span></a>
        <a href="games.html/RiddleSchool1.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Riddle School 1</span></a>
         <a href="games.html/RiddleSchool2.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Riddle School 2</span></a>
         <a href="games.html/RiddleSchool3.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Riddle School 3</span></a>
         <a href="games.html/RiddleSchool4.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Riddle School 4</span></a>
         <a href="games.html/RiddleSchool5.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Riddle School 5</span></a>
         <a href="games.html/RiddleSchoolTransfer.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Riddle School Transfer</span></a>
         <a href="games.html/RiddleSchoolTransfer2.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Riddle School Transfer 2</span></a>
         <a href="games.html/RooftopSnipers2.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Rooftop Snipers 2</span></a>
         <a href="games.html/Run2.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Run 2</span></a>
         <a href="games.html/SnowRider3d.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Snow Rider 3d</span></a>
         <a href="games.html/SpaceInvaders.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Space Invaders</span></a>
         <a href="games.html/Stack.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Stack</span></a>
         <a href="games.html/StickmanHook.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Stick Man Hook</span></a>
         <a href="games.html/SubwaySurfers.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Subway Surfers</span></a>
         <a href="games.html/SuperMario64.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Super Mario 64</span></a>
         <a href="games.html/Tag.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Tag</span></a>
         <a href="games.html/TerritorialIo.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">Territorial io</span></a>
         <a href="games.html/TheFinalEarth.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">The Final Earth</span></a>
         <a href="games.html/TunnelRush.html" class="game-button"><canvas class="game-button-canvas"></canvas><span class="game-button-content">TunnelRush</span></a>
        <!-- End of Game Buttons Autogenerated -->
      </div>
    </div>
  </div>
  <!-- In-site modal for iframe games -->
  <div id="game-modal">
    <div class="modal-inner">
      <button id="game-modal-close">&times; Close</button>
     <div style="position: absolute; left: 14px; top: 12px; z-index: 20; display: flex; gap: 12px;">
  <a id="iframe-modal-download-btn" href="#" download
    style="background:linear-gradient(90deg,var(--theme-accent),var(--theme-accent-light));color:#fff;padding:7px 18px;border-radius:7px;border:none;font-family:'Montserrat',Arial,sans-serif;font-weight:700;font-size:1.09rem;text-decoration:none;box-shadow:0 2px 16px var(--theme-accent-dark, #1e90ff33);cursor:pointer;transition:background 0.15s;">
    ⬇ Download
  </a>
  <button id="open-about-blank-btn"
    style="background:linear-gradient(90deg,#444,#888);color:#fff;padding:7px 18px;border-radius:7px;border:none;font-family:'Montserrat',Arial,sans-serif;font-weight:700;font-size:1.09rem;text-decoration:none;box-shadow:0 2px 16px #2225;cursor:pointer;transition:background 0.15s;">
    ↗ Open in about:blank
  </button>
  <button id="fullscreen-btn"
    style="background:linear-gradient(90deg,#222,#333);color:#fff;padding:7px 18px;border-radius:7px;border:none;font-family:'Montserrat',Arial,sans-serif;font-weight:700;font-size:1.09rem;text-decoration:none;box-shadow:0 2px 16px #2225;cursor:pointer;transition:background 0.15s;">
    ⛶ Fullscreen
  </button>
</div>
      <div id="iframe-holder" style="width:100%;height:100%;flex:1;display:flex;flex-direction:column;">
        <iframe id="game-iframe" src="" allowtransparency="true" frameborder="0" scrolling="yes" allowfullscreen style="flex:1;"></iframe>
        <div id="iframe-fallback">
          <span id="iframe-fallback-msg"></span><br>
          <a id="iframe-fallback-link" href="#" target="_blank">Open Game In New Tab</a>
        </div>
      </div>
    </div>
  </div>
  <script>
    // --- Full-window iframe logic (iframe.html merged) ---

  // Include the same getDailyPassword() function as in your generator page
  function getDailyPassword() {
    const words = [
      "Phantom", "Shadow", "Specter", "Ghost", "Vortex", "Nova", "Rogue", "Blaze", "Fury",
      "Titan", "Reaper", "Venom", "Cipher", "Dragon", "Falcon", "Havoc", "Inferno",
      "Knight", "Maverick", "Nemesis", "Oracle", "Ranger", "Saber", "Tempest",
      "Umbra", "Viper", "Wraith", "Zephyr", "Apex", "Dagger", "Echo",
      "Fang", "Grim", "Hawk", "Ion", "Lancer", "Nexus", "Onyx",
      "Pyro", "Rift", "Scorch", "Talon",  
      "Arcane", "Blitz", "Crimson", "Dread", "Ember", "Frost", "Glitch", "Helix", "Ignite",
      "Mythic", "Nova", "Obsidian", "Phantom", "Rogue", "Vortex",
      "Abyss", "Alpha", "Arc",  "Atom", "Avalanche", "Bane", "Bolt", "Chaos",
      "Chrome", "Comet", "Cosmos", "Crimson", "Crypt", "Cyclone", "Dusk", "Ember", "Enigma",
      "Frostbite", "Glacier",  "Iron", "Freedom",
      "Mirage", "Nebula", "Nightfall", "Obsidian", 
      "Orion", "Plasma",  "Quantum", "Raptor", "Rift", 
      "Savage", "Scythe", "Shard",  "Thunder"
    ];
    const today = new Date();
    const yyyy = today.getFullYear();
    const mm = String(today.getMonth() + 1).padStart(2, '0');
    const dd = String(today.getDate()).padStart(2, '0');
    const dateStr = `${yyyy}-${mm}-${dd}`;
    let hash = 0;
    for (let i = 0; i < dateStr.length; i++) {
      hash = (hash << 5) - hash + dateStr.charCodeAt(i);
      hash |= 0;
    }
    const wordIndex = Math.abs(hash) % words.length;
    const number = Math.abs(hash * 7) % 900 + 100;
    return words[wordIndex] + number;
  }

  // Validation script
  document.addEventListener('DOMContentLoaded', function() {
    var storedPassword = localStorage.getItem('dailyPassword');
    var correctPassword = getDailyPassword();

    // Check if the stored password matches today's password
    if (!storedPassword || storedPassword !== correctPassword) {
      alert("The stored password is missing or not today's password. Please generate today's password first.");
      window.location.reload();
      return;
    }

    // Prompt logic
    var attempts = 0;
    while (true) {
      var userInput = prompt("Enter today's ION password:");
      if (userInput === null) {
        document.body.innerHTML = "<h2 style='color:#3fa7ff;text-align:center;margin-top:3em;font-family:sans-serif;'>Access Cancelled</h2>";
        break;
      }
      if (userInput === correctPassword) {
        // Correct password
        break;
      } else {
        attempts++;
        if (attempts >= 3) {
          alert("Too many incorrect attempts. Reloading page.");
          window.location.reload();
          break;
        } else {
          alert("Incorrect password. Try again.");
        }
      }
    }
  });

    (function() {
      function getQueryParam(name) {
        let match = location.search.match(new RegExp('[?&]' + name + '=([^&]+)'));
        return match ? decodeURIComponent(match[1]) : '';
      }
      var gameSrc = getQueryParam('src');
      if (gameSrc) {
        document.body.style.margin = "0";
        document.body.style.padding = "0";
        document.body.style.overflow = "hidden";
        Array.from(document.body.children).forEach(function(child) {
          if (child.id !== "full-iframe-container") child.style.display = "none";
        });
        var fc = document.getElementById('full-iframe-container');
        fc.style.display = "block";
        var iframe = document.getElementById('full-iframe');
        var downloadBtn = document.getElementById('iframe-download-btn');
        var fallback = document.getElementById('full-iframe-fallback');
        var fallbackMsg = document.getElementById('full-iframe-fallback-msg');
        var fallbackLink = document.getElementById('full-iframe-fallback-link');
        iframe.src = gameSrc;
        // Guess filename from URL for Chromebook style
        var gameNameGuess = gameSrc.split('/').pop().replace(/\.html.*$/,"").replace(/[^a-zA-Z0-9]/g,'_');
        var fileName = gameNameGuess + '.chronos.html';
        downloadBtn.href = gameSrc;
        downloadBtn.download = fileName;
        fallbackLink.href = gameSrc;
        // Fallback logic for full-window iframe
        let fallbackTimeout = setTimeout(() => {
          showFullIframeFallback(gameSrc, "This game can't be embedded due to site security. Click below to open it in a new tab.");
        }, 3500);
        function showFullIframeFallback(url, msg) {
          iframe.style.display = 'none';
          fallback.style.display = '';
          fallbackLink.href = url;
          fallbackMsg.textContent = msg || "This game can't be embedded. Click below to open it in a new tab.";
        }
        function resetFullIframeFallback() {
          iframe.style.display = '';
          fallback.style.display = 'none';
        }
        iframe.onload = function() {
          clearTimeout(fallbackTimeout);
          try {
            let test = iframe.contentWindow.location.href;
          } catch (err) {
            showFullIframeFallback(gameSrc, "This game can't be embedded. Click below to open it in a new tab.");
          }
        };
        iframe.onerror = function() {
          clearTimeout(fallbackTimeout);
          showFullIframeFallback(gameSrc, "This game can't be embedded. Click below to open it in a new tab.");
        };
      }
    })();

    // --- Modal logic for iframe games (Games.html logic) with fallback ---
    if (!location.search.match(/[?&]src=/)) {
      const gameUrlMap = {
        "Bob The Robber 4": "games.html/BobTheRobber4.html",
       "2048 Fusion": "games.html/2048Fusion.html",
        "Rocket League": "games.html/RocketLeague.html",
        "DriftHunters": "games.html/DriftHunters.html",
          "Uno": "games.html/Uno.html",
       "Idle Restraunt": "games.html/IdleRestraunt.html",
        "Merge Cakes": "games.html/MergeCakes.html",
        "Crazy Cars": "games.html/CrazyCars.html",
        "Head Soccer": "games.html/HeadSoccer.html",
        "Wordle": "games.html/Wordle.html",
          "Archery World Tour": "games.html/ArcheryWorldTour.html",
          "Awesome Tanks 1": "games.html/AwesomeTanks1.html",
        "Idle Mining Empire": "games.html/IdleMiningEmpire.html",
        "Bubble Tanks 2": "games.html/BubbleTanks2.html",
        "Chrome Dino": "games.html/ChromeDino.html",
        "Cluster Rush": "games.html/ClusterRush.html",
        "Cookie Clicker": "games.html/CookieClicker.html",
        "Drift Boss": "games.html/Drift boss.html",
        "Drive Mad": "games.html/DriveMad.html",
        "Geometry Dash": "games.html/GeometryDash.html",
        "Helix Jump": "games.html/HelixJump.html",
        "Learn To Fly": "games.html/LearnToFly.html",
        "Learn To Fly 2": "games.html/LearnToFly2.html",
        "Minecraft 1.5.2": "games.html/Minecraft1.5.2.html",
        "Minecraft 1.8.8": "games.html/Minecraft1.8.8.html",
        "Monkey Mart": "games.html/MonkeyMart.html",
        "Moto X3M Pool": "games.html/MotoX3M-Pool.html",
        "Moto X3M Spooky": "games.html/MotoX3M-Spooky.html",
        "Moto X3M Winter": "games.html/MotoX3M-Winter.html",
        "Moto X3M": "games.html/MotoX3M.html",
        "Run 3": "games.html/Run3.html",
        "Slope": "games.html/Slope.html",
        "Slope 2": "games.html/Slope2.html",
        "Tunnel Rush": "games.html/TunnelRush.html",
        "Bob The Robber 2": "games.html/bobtherobber2.html",
        "1": "games.html/1(2048).html",
        "Big Tower Tiny Square": "games.html/BigTowerTinySquare.html",
        "Bloxors": "games.html/Bloxors.html",
        "CircloO": "games.html/CircloO.html",
        "Crazy Cattle 3d": "games.html/CrazyCattle3d.html",
        "Crossy Road": "games.html/CrossyRoad.html",
        "Cut The Rope": "games.html/CutTheRope.html",
        "Duck Life": "games.html/DuckLife.html",
        "Duck Life 2": "games.html/DuckLife2.html",
        "Fruit Ninja": "games.html/FruitNinja.html",
        "Getaway Shootout": "games.html/GetAwayShootout.html",
        "Google Snake": "games.html/GoogleSnake.html",
        "Hextris": "games.html/Hextris.html",
        "Jetpack Joyride": "games.html/JetpackJoyride.html",
        "Level Devil": "games.html/LevilDevil.html",
        "Mini Putt": "games.html/MiniPutt.html",
        "Paper io 2": "games.html/PaperIo2.html",
        "Push Your Luck": "games.html/PushYourLuck.html",
        "RetroBowl": "games.html/RetroBowl.html",
        "Riddle School 1": "games.html/RiddleSchool1.html",
        "Riddle School 2": "games.html/RiddleSchool2.html",
        "Riddle School 3": "games.html/RiddleSchool3.html",
        "Riddle School 4": "games.html/RiddleSchool4.html",
        "Riddle School 5": "games.html/RiddleSchool5.html",
        "Riddle School Transfer": "games.html/RiddleSchoolTransfer.html",
        "Riddle School Transfer 2": "games.html/RiddleSchoolTransfer2.html",
        "Rooftop Snipers 2": "games.html/RooftopSnipers2.html",
        "Run 2": "games.html/Run2.html",
        "Snow Rider 3d": "games.html/SnowRider3d.html",
        "Space Invaders": "games.html/SpaceInvaders.html",
        "Stack": "games.html/Stack.html",
        "Stickman Hook": "games.html/StickmanHook.html",
        "Subway Surfers": "games.html/SubwaySurfers.html",
        "Super Mario 64": "games.html/SuperMario64.html",
        "Tag": "games.html/Tag.html",
        "Territorial io": "games.html/TerritorialIo.html",
        "The Final Earth": "games.html/TheFinalEarth.html",
        "Tunnel Rush": "games.html/TunnelRush.html",
      };

      function showIframeFallback(url, msg) {
        document.getElementById('game-iframe').style.display = 'none';
        document.getElementById('iframe-fallback').style.display = '';
        document.getElementById('iframe-fallback-link').href = url;
        document.getElementById('iframe-fallback-msg').textContent = msg || "This game can't be embedded. Click below to open it in a new tab.";
      }
      function resetIframeFallback() {
        document.getElementById('game-iframe').style.display = '';
        document.getElementById('iframe-fallback').style.display = 'none';
      }

      const downloadMap = gameUrlMap; // download links match modal links

      const downloadBtn = document.getElementById('iframe-modal-download-btn');
      // When game is opened, set the download button link
      document.querySelectorAll('.game-button').forEach(btn => {
        btn.addEventListener('click', function(e) {
          let gameName = btn.querySelector('.game-button-content')?.innerText.trim() || btn.innerText.trim();
          let src = downloadMap[gameName] || btn.getAttribute('href') || "";
          downloadBtn.setAttribute('data-gamename', gameName);
          downloadBtn.style.display = src ? "" : "none";
          if (src) {
            let filename = gameName.replace(/\s+/g,'_').replace(/[^a-zA-Z0-9_]/g,'') + '.chronos.html';
            downloadBtn.setAttribute('download', filename);
            downloadBtn.setAttribute('href', src);
          }
        });
      });

      // Modal extra buttons
document.getElementById('open-about-blank-btn').onclick = function() {
  const src = document.getElementById('game-iframe').src;
  if (!src) return;
  const win = window.open('about:blank', '_blank');
  if (win) {
    win.document.write(`
      <title>${document.title}</title>
      <style>
        html,body {height:100%;margin:0;overflow:hidden;background:#181b24;}
        iframe {border:none;width:100vw;height:100vh;display:block;}
      </style>
      <iframe src="${src}" allowfullscreen></iframe>
    `);
    win.document.close();
  }
};
document.getElementById('fullscreen-btn').onclick = function() {
  const iframe = document.getElementById('game-iframe');
  if (iframe.requestFullscreen) iframe.requestFullscreen();
  else if (iframe.webkitRequestFullscreen) iframe.webkitRequestFullscreen();
  else if (iframe.msRequestFullscreen) iframe.msRequestFullscreen();
};

      document.querySelectorAll('.game-button').forEach(btn => {
        btn.addEventListener('click', function(e) {
          e.preventDefault();
          let gameName = btn.querySelector('.game-button-content')?.innerText.trim() || btn.innerText.trim();
          let src = gameUrlMap[gameName] || btn.getAttribute('href') || "";
          if (!src) {
            alert("No iframe source set for this game yet!");
            return;
          }
          resetIframeFallback();
          document.getElementById('game-iframe').src = src;
          document.getElementById('iframe-fallback-link').href = src;
          document.getElementById('game-modal').style.display = 'flex';
          document.body.style.overflow = 'hidden';

          // Fallback if iframe fails to load (X-Frame-Options or CSP)
          let iframe = document.getElementById('game-iframe');
          let fallbackTimeout = setTimeout(() => {
            showIframeFallback(src, "This game can't be embedded due to site security. Click below to open it in a new tab.");
          }, 3500);

          iframe.onload = function() {
            clearTimeout(fallbackTimeout);
            try {
              let test = iframe.contentWindow.location.href;
            } catch (err) {
              showIframeFallback(src, "This game can't be embedded. Click below to open it in a new tab.");
            }
          };
          iframe.onerror = function() {
            clearTimeout(fallbackTimeout);
            showIframeFallback(src, "This game can't be embedded. Click below to open it in a new tab.");
          };
        });
      });
      document.getElementById('game-modal-close').onclick = function() {
        document.getElementById('game-modal').style.display = 'none';
        document.getElementById('game-iframe').src = '';
        document.body.style.overflow = '';
        resetIframeFallback();
        downloadBtn.setAttribute('data-gamename', "");
        downloadBtn.style.display = "none";
      };
      document.getElementById('game-modal').addEventListener('click', function(e) {
        if (e.target === this) {
          document.getElementById('game-modal-close').click();
        }
      });

      // ----- Enhanced settings syncing -----
      // Uses localStorage for syncing with Settings.html. Both pages should use the same key and event.
      const CLOAK_KEY = "ion-premade-cloak";
      const cloakDropdown = document.getElementById('premade-cloak-dropdown');

      // Initialize the dropdown based on stored value
      function loadCloakSetting() {
        let val = localStorage.getItem(CLOAK_KEY) || "off";
        cloakDropdown.value = val;
      }
      loadCloakSetting();

      // On change, save and notify
      cloakDropdown.addEventListener("change", function() {
        localStorage.setItem(CLOAK_KEY, cloakDropdown.value);
        window.dispatchEvent(new Event("ionSettingsChanged"));
      });

      // Listen for storage or custom event changes (cross-tab and cross-page)
      window.addEventListener("storage", function(e) {
        if (e.key === CLOAK_KEY) loadCloakSetting();
      });
      window.addEventListener("ionSettingsChanged", function() {
        loadCloakSetting();
      });

      // Quick Settings Gear Button Logic
      const gearBtn = document.getElementById('quick-settings-gear-btn');
      const modal = document.getElementById('quick-settings-modal');
      const closeBtn = document.getElementById('quick-settings-modal-close');
      gearBtn.onclick = function() {
        modal.classList.add('active');
      };
      closeBtn.onclick = function() {
        modal.classList.remove('active');
      };
      // Close modal when clicking outside the sheet
      modal.addEventListener('mousedown', function(e) {
        if (e.target === modal) modal.classList.remove('active');
      });
      // Escape key closes modal
      document.addEventListener('keydown', function(e) {
        if (e.key === "Escape" && modal.classList.contains('active')) {
          modal.classList.remove('active');
        }
      });
    }
  </script>
  <script>
const cloakData = {
  off: {
    title: "ION Game Vault",
    favicon: "favicon.ico"
  },
  classroom: {
    title: "Classes",
    favicon: "https://ssl.gstatic.com/classroom/ic_product_classroom_32.png"
  },
  sheets: {
    title: "Untitled spreadsheet - Google Sheets",
    favicon: "https://ssl.gstatic.com/docs/spreadsheets/favicon3.ico"
  },
  slides: {
    title: "Untitled presentation - Google Slides",
    favicon: "https://ssl.gstatic.com/docs/presentations/images/favicon5.ico"
  },
  docs: {
    title: "Untitled document",
    favicon: "https://ssl.gstatic.com/docs/doclist/images/infinite_arrow_favicon_5.ico"
  },
  gmail: {
    title: "Inbox (1) - Gmail",
    favicon: "https://ssl.gstatic.com/ui/v1/icons/mail/rfr/gmail.ico"
  },
  powerschool: {
    title: "PowerSchool",
    favicon: "https://www.powerschool.com/favicon.ico"
  },
  studysync: {
    title: "StudySync",
    favicon: "https://7-7-7-8.github.io/ION/assets/Screenshot%202025-06-17%209.35.35%20AM.png"
  },
  khan: {
    title: "Khan Academy",
    favicon: "https://www.khanacademy.org/favicon.ico"
  },
  adobe: {
    title: "Adobe",
    favicon: "https://www.adobe.com/favicon.ico"
  },
  powerpoint: {
    title: "Presentation1 - PowerPoint",
    favicon: "https://s3-us-west-2.amazonaws.com/courses-images/wp-content/uploads/sites/5348/2020/08/01054405/powerpoint.png"
  },
  word: {
    title: "Document1 - Word",
    favicon: "https://logodownload.org/wp-content/uploads/2018/10/word-logo-8.png"
  },
  youtube: {
    title: "YouTube",
    favicon: "https://upload.wikimedia.org/wikipedia/commons/thumb/0/09/YouTube_full-color_icon_(2017).svg/2560px-YouTube_full-color_icon_(2017).svg.png"
  }
};

function setCloak(cloakKey) {
  const cloak = cloakData[cloakKey] || cloakData['off'];
  // Set document title
  document.title = cloak.title;
  // Set favicon
  let link = document.querySelector("link[rel~='icon']");
  if (!link) {
    link = document.createElement('link');
    link.rel = 'icon';
    document.head.appendChild(link);
  }
  link.href = cloak.favicon;
}

// Cloak Now button logic
document.getElementById("cloak-now-btn").onclick = function() {
  const cloakKey = document.getElementById('premade-cloak-dropdown').value;
  setCloak(cloakKey);
  localStorage.setItem("ion-premade-cloak", cloakKey);
};

// On page load, restore last-used cloak
window.addEventListener("DOMContentLoaded", function() {
  const savedCloak = localStorage.getItem("ion-premade-cloak") || "off";
  const dropdown = document.getElementById('premade-cloak-dropdown');
  if (dropdown) {
    dropdown.value = savedCloak;
    setCloak(savedCloak);
  }
});
</script>
</body>
</html>
